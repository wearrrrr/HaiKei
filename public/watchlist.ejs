<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watchlist - HaiKei</title>
    <link rel="stylesheet" href="/css/m.min.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/watchpage.css">
    <link rel="stylesheet" href="/css/watchlist.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons+Sharp" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <div id="xwrapper">
    <%- include('templates/header') %>
<div id="xmain-wrapper">
    <div id="mw-top">
        <div class="container">
        <div class="mwt-content">
        <div class="mwh-logo">
            <div class="clearfix"></div>
        </div>
            <div class="xhashtag">
            <span class="title">Top search:</span>
            <a href="/search?query=One%20Piece" class="item">One Piece</a>
            <a href="/search?query=Naruto%3A%20Shippuden" class="item">Naruto: Shippuden</a>
            <a href="/search?query=Mugen Train" class="item">Demon Slayer Movie: Mugen Train</a>
            <a href="/search?query=Boruto%3A%20Naruto%20Next%20Generations" class="item">Boruto: Naruto Next Generations</a>
            <a href="/search?query=Naruto" class="item">Naruto</a>
            <a href="/search?query=Sorcery+Fight" class="item">Jujutsu Kaisen (TV)</a>
            <a href="/search?query=Boku+No+Hero+Academia+5th+Season" class="item">My Hero Academia 5th Season</a>
            <a href="/search?query=Demon%20Slayer%3A%20Kimetsu%20no%20Yaiba" class="item">Demon Slayer: Kimetsu no Yaiba</a>
            <a href="/search?query=Attack%20on%20Titan" class="item">Attack on Titan</a>
            <a href="/search?query=Black%20Clover" class="item">Black Clover</a>
            </div>
            <div style="height: 60px;" class="clearfix"></div>
            </div>
            </div>
            </div>
        </div>
    </div>
    <% let data = JSON.parse(watchlist); %>
    <% if (data.results.length !== 0) { %>
        <h1 class="header">Your Watchlist:</h1>
    <% } %>
    <script>
        let cardData = `<%- data.results %>`
        let parsed = JSON.parse(`{"results":[${cardData}]}`)
    </script>
    <div class="new-releases">
    <div class="grid-wrapper-new-release">
    <% if(data.results.length !== 0) { %>
        <% data.results.reverse().forEach(card => { %>
        <% card = JSON.parse(card) %>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            <li class="splide__slide  ">
            <a class="searchLink" href="/watch/<%- card.id %>/1"></a>
                <img src="<%- card.image %>" alt="<%- card.title %>" style="width: 164px; height: 231px; align-self: center"> 
                <span class="deleteItem">&times;</span>
                <p style="margin-bottom: 0;" class="splide__animeTitle"><%- card.title %></p>
                <p class="splide__episodeNum">Episodes:  <%- card.totalEpisodes %></p>
                <p class="splide__episodeNum">Release Date: <%- card.releaseDate %></p>
                <p class="splide__episodeNum">Status: <%- card.status %></p>
            </li>
        <% }) %>
    <% } %>
    </div>
</div>
<% if (data.results.length == 0) { %>
    <div class="watchlist-empty">
        <h1 style="color: #4f4f4f; font-size: 4rem;" class="main-text" id="watchlist-empty-face"></h1>
        <br>
        <h1 style="color: #888888; font-size: 3rem;">Your Watchlist is empty!</h1>
        <h2 style="color: #888888; font-size: 2rem;">You should try adding some shows! ^w^</h2>
    </div>
    <script src="/js/kaomoji.js"></script>
    <script>
        document.getElementById('watchlist-empty-face').textContent = new kaomoji().sadness()
    </script>
<% } %>
    <div style="position: relative; height: 20vh;" class="footerfix"></div>
    <%- include('templates/footer') %>
    <%- include('templates/login_modals') %>
    <!-- Load essential libraries -->
    <script src="/js/main.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>

    <script>
    $(document).ready(function () {
    $("#xheader_browser").click(function (e) {
        $("#xheader_menu, #xheader_browser").toggleClass("active");
    });
        $(".register-tab-link").click(function (e) {
        $("#modal-tab-register").addClass("active show"),
        $("#modal-tab-login").removeClass("active show");
    })
        $(".forgot-tab-link").click(function (e) {
        $("#modal-tab-forgot").addClass("active show"),
        $("#modal-tab-login").removeClass("active show");
    }),
        $(".login-tab-link").click(function (e) {
        $("#modal-tab-login").addClass("active show"),
        $("#modal-tab-register, #modal-tab-forgot").removeClass("active show");
    })
});
    anime({
        targets: '.splide__slide',
        translateY: -250,
        easing: 'easeInOutQuad',
        delay: anime.stagger(30),
        duration: 500,
    });
    </script>

</body>
</html>